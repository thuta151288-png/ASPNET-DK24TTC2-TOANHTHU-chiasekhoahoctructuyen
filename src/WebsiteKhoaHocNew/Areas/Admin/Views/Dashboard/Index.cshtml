@model DashboardViewModel

@{
    ViewData["Title"] = "Quản trị - Dashboard";
}

<div class="container" style="padding: 3rem 0;">
    <h1 style="margin-bottom: 2rem;">
        <i class="fas fa-tachometer-alt"></i> Dashboard Quản Trị
    </h1>

    <!-- Stats Cards -->
    <div class="row" style="margin-bottom: 3rem;">
        <div class="col-md-3">
            <div class="card" style="background: var(--gradient-primary); color: white; padding: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0; font-size: 2.5rem;">@Model.TotalUsers</h3>
                        <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Người dùng</p>
                    </div>
                    <i class="fas fa-users" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0; font-size: 2.5rem;">@Model.TotalCourses</h3>
                        <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Khóa học</p>
                    </div>
                    <i class="fas fa-book" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0; font-size: 2.5rem;">@Model.TotalOrders</h3>
                        <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Đơn hàng</p>
                    </div>
                    <i class="fas fa-shopping-cart" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0; font-size: 1.5rem;">@Model.TotalRevenue.ToString("N0") đ</h3>
                        <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Doanh thu</p>
                    </div>
                    <i class="fas fa-dollar-sign" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-body" style="padding: 2rem;">
            <h3 style="margin-bottom: 1.5rem;">
                <i class="fas fa-bolt"></i> Thao Tác Nhanh
            </h3>
            <div class="row">
                <div class="col-md-3">
                    <a asp-area="Admin" asp-controller="Courses" asp-action="Create" class="btn btn-primary" style="width: 100%; padding: 1rem;">
                        <i class="fas fa-plus-circle"></i><br>Thêm khóa học mới
                    </a>
                </div>
                <div class="col-md-3">
                    <a asp-area="Admin" asp-controller="Categories" asp-action="Index" class="btn btn-outline-primary" style="width: 100%; padding: 1rem;">
                        <i class="fas fa-tags"></i><br>Quản lý danh mục
                    </a>
                </div>
                <div class="col-md-3">
                    <a asp-area="Admin" asp-controller="Users" asp-action="Index" class="btn btn-outline-primary" style="width: 100%; padding: 1rem;">
                        <i class="fas fa-users-cog"></i><br>Quản lý người dùng
                    </a>
                </div>
                <div class="col-md-3">
                    <a asp-area="Admin" asp-controller="Orders" asp-action="Index" class="btn btn-outline-primary" style="width: 100%; padding: 1rem;">
                        <i class="fas fa-file-invoice"></i><br>Xem đơn hàng
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activities -->
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h4 style="margin-bottom: 1.5rem;">
                        <i class="fas fa-clock"></i> Đơn Hàng Gần Đây
                    </h4>
                    @if (Model.RecentOrders.Any())
                    {
                        <div style="max-height: 400px; overflow-y: auto;">
                            @foreach (var order in Model.RecentOrders)
                            {
                                <div style="padding: 1rem; border-bottom: 1px solid var(--border-color);">
                                    <div style="display: flex; justify-content: space-between;">
                                        <div>
                                            <strong>@order.User.FullName</strong>
                                            <p style="margin: 0.25rem 0; color: var(--text-muted); font-size: 0.875rem;">
                                                @order.Course.Title
                                            </p>
                                        </div>
                                        <div style="text-align: right;">
                                            <strong style="color: var(--primary-light);">@order.Amount.ToString("N0") đ</strong>
                                            <p style="margin: 0.25rem 0; color: var(--text-muted); font-size: 0.875rem;">
                                                @order.CreatedAt.ToString("dd/MM HH:mm")
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p style="text-align: center; color: var(--text-muted); padding: 2rem;">Chưa có đơn hàng nào</p>
                    }
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h4 style="margin-bottom: 1.5rem;">
                        <i class="fas fa-user-plus"></i> Người Dùng Mới
                    </h4>
                    @if (Model.RecentUsers.Any())
                    {
                        <div style="max-height: 400px; overflow-y: auto;">
                            @foreach (var user in Model.RecentUsers)
                            {
                                <div style="padding: 1rem; border-bottom: 1px solid var(--border-color);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong>@user.FullName</strong>
                                            <p style="margin: 0.25rem 0; color: var(--text-muted); font-size: 0.875rem;">
                                                @user.Email
                                            </p>
                                        </div>
                                        <span style="color: var(--text-muted); font-size: 0.875rem;">
                                            @user.CreatedAt.ToString("dd/MM/yyyy")
                                        </span>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p style="text-align: center; color: var(--text-muted); padding: 2rem;">Chưa có người dùng mới</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
