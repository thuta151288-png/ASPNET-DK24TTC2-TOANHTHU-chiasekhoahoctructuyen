@model Course

@{
    ViewData["Title"] = "Th√™m kh√≥a h·ªçc";
}

<div class="container" style="max-width: 1000px; margin: 3rem auto;">
    <div style="margin-bottom: 2.5rem;">
        <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">
            <i class="fas fa-plus-circle" style="color: var(--primary-light);"></i> Th√™m Kh√≥a H·ªçc M·ªõi
        </h1>
        <p style="color: var(--text-muted); margin: 0;">
            ƒêi·ªÅn th√¥ng tin ƒë·ªÉ t·∫°o kh√≥a h·ªçc m·ªõi
        </p>
    </div>

    <div class="card" style="border: 2px solid var(--border-color);">
        <div class="card-body" style="padding: 2.5rem;">
            <form asp-action="Create" method="post" enctype="multipart/form-data">
                @Html.AntiForgeryToken()
                
                <!-- Validation Summary -->
                @if (!ViewData.ModelState.IsValid)
                {
                    <div class="alert alert-danger" style="margin-bottom: 2rem;">
                        <h5 style="margin-bottom: 1rem;">
                            <i class="fas fa-exclamation-triangle"></i> C√≥ l·ªói x·∫£y ra:
                        </h5>
                        <ul style="margin: 0; padding-left: 1.5rem;">
                            @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                            {
                                <li>@error.ErrorMessage</li>
                            }
                        </ul>
                    </div>
                }

                <!-- Basic Info Section -->
                <h5 style="margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-color); color: var(--primary-light);">
                    <i class="fas fa-info-circle"></i> Th√¥ng tin c∆° b·∫£n
                </h5>

                <div class="row">
                    <div class="col-md-8">
                        <div class="mb-3">
                            <label asp-for="Title" class="form-label" style="font-weight: 600;">
                                <i class="fas fa-heading"></i> T√™n kh√≥a h·ªçc <span style="color: var(--error-color);">*</span>
                            </label>
                            <input asp-for="Title" class="form-control" placeholder="VD: L·∫≠p tr√¨nh ASP.NET Core MVC t·ª´ A-Z" 
                                   style="padding: 0.75rem;" />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label asp-for="CategoryId" class="form-label" style="font-weight: 600;">
                                <i class="fas fa-folder"></i> Danh m·ª•c <span style="color: var(--error-color);">*</span>
                            </label>
                            <select asp-for="CategoryId" class="form-select" asp-items="@((SelectList)ViewData["CategoryId"])" 
                                    style="padding: 0.75rem;">
                                <option value="">-- Ch·ªçn danh m·ª•c --</option>
                            </select>
                            <span asp-validation-for="CategoryId" class="text-danger"></span>
                            <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                                <i class="fas fa-info-circle"></i> 
                                N·∫øu kh√¥ng c√≥ danh m·ª•c, <a asp-controller="Categories" asp-action="Create" target="_blank" style="color: var(--primary-light);">t·∫°o m·ªõi t·∫°i ƒë√¢y</a>
                            </small>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label asp-for="Description" class="form-label" style="font-weight: 600;">
                        <i class="fas fa-align-left"></i> M√¥ t·∫£ <span style="color: var(--error-color);">*</span>
                    </label>
                    <textarea asp-for="Description" class="form-control" rows="5" 
                              placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ n·ªôi dung kh√≥a h·ªçc, ƒë·ªëi t∆∞·ª£ng h·ªçc vi√™n, ki·∫øn th·ª©c ƒë·∫°t ƒë∆∞·ª£c..."
                              style="padding: 0.75rem;"></textarea>
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>

                <!-- Instructor Section -->
                <h5 style="margin: 2.5rem 0 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-color); color: var(--primary-light);">
                    <i class="fas fa-chalkboard-teacher"></i> Th√¥ng tin gi·∫£ng vi√™n
                </h5>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="InstructorName" class="form-label" style="font-weight: 600;">
                                <i class="fas fa-user"></i> T√™n gi·∫£ng vi√™n
                            </label>
                            <input asp-for="InstructorName" class="form-control" placeholder="VD: Nguy·ªÖn VƒÉn A" 
                                   style="padding: 0.75rem;" />
                            <span asp-validation-for="InstructorName" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Price" class="form-label" style="font-weight: 600;">
                                <i class="fas fa-tag"></i> Gi√° (VNƒê) <span style="color: var(--error-color);">*</span>
                            </label>
                            <input asp-for="Price" class="form-control" type="number" min="0" step="1000" placeholder="999000" 
                                   style="padding: 0.75rem;" />
                            <span asp-validation-for="Price" class="text-danger"></span>
                            <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                                <i class="fas fa-info-circle"></i> Nh·∫≠p 0 n·∫øu kh√≥a h·ªçc mi·ªÖn ph√≠
                            </small>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label asp-for="InstructorBio" class="form-label" style="font-weight: 600;">
                        <i class="fas fa-id-card"></i> Gi·ªõi thi·ªáu gi·∫£ng vi√™n
                    </label>
                    <textarea asp-for="InstructorBio" class="form-control" rows="3" 
                              placeholder="Kinh nghi·ªám, th√†nh t√≠ch v√† chuy√™n m√¥n c·ªßa gi·∫£ng vi√™n..."
                              style="padding: 0.75rem;"></textarea>
                    <span asp-validation-for="InstructorBio" class="text-danger"></span>
                </div>

                <!-- Media Section -->
                <h5 style="margin: 2.5rem 0 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--primary-color); color: var(--primary-light);">
                    <i class="fas fa-image"></i> ·∫¢nh b√¨a & Tr·∫°ng th√°i
                </h5>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label" style="font-weight: 600;">
                                <i class="fas fa-upload"></i> ·∫¢nh b√¨a
                            </label>
                            <input type="file" name="coverImage" class="form-control" accept="image/*" 
                                   style="padding: 0.75rem;" />
                            <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                                <i class="fas fa-info-circle"></i> Khuy·∫øn ngh·ªã: 1200x600px, ƒë·ªãnh d·∫°ng JPG/PNG, t·ªëi ƒëa 5MB
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label asp-for="Status" class="form-label" style="font-weight: 600;">
                                <i class="fas fa-toggle-on"></i> Tr·∫°ng th√°i
                            </label>
                            <select asp-for="Status" class="form-select" style="padding: 0.75rem;">
                                <option value="0">üìù Draft (Nh√°p) - Ch∆∞a c√¥ng khai</option>
                                <option value="1">‚úÖ Published (C√¥ng khai) - Hi·ªÉn th·ªã cho h·ªçc vi√™n</option>
                            </select>
                            <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                                <i class="fas fa-info-circle"></i> Ch·ªçn "Draft" ƒë·ªÉ l∆∞u nh√°p, "Published" ƒë·ªÉ c√¥ng khai
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Info Box -->
                <div class="alert alert-info" style="margin-top: 2rem; border-left: 4px solid var(--primary-color);">
                    <h6 style="margin-bottom: 0.75rem;">
                        <i class="fas fa-lightbulb"></i> L∆∞u √Ω:
                    </h6>
                    <ul style="margin: 0; padding-left: 1.5rem;">
                        <li>C√°c tr∆∞·ªùng c√≥ d·∫•u <span style="color: var(--error-color);">*</span> l√† b·∫Øt bu·ªôc</li>
                        <li>Sau khi t·∫°o kh√≥a h·ªçc, b·∫°n c√≥ th·ªÉ th√™m b√†i h·ªçc v√†o kh√≥a h·ªçc</li>
                        <li>Kh√≥a h·ªçc ·ªü tr·∫°ng th√°i "Draft" s·∫Ω kh√¥ng hi·ªÉn th·ªã cho h·ªçc vi√™n</li>
                    </ul>
                </div>

                <!-- Actions -->
                <div style="display: flex; gap: 1rem; margin-top: 2.5rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                    <button type="submit" class="btn btn-primary" style="padding: 0.75rem 2rem; font-size: 1.1rem;">
                        <i class="fas fa-save"></i> T·∫°o Kh√≥a H·ªçc
                    </button>
                    <a asp-action="Index" class="btn btn-secondary" style="padding: 0.75rem 2rem; font-size: 1.1rem;">
                        <i class="fas fa-times"></i> H·ªßy
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    
    <script>
        // Auto-format price input
        document.querySelector('input[name="Price"]').addEventListener('blur', function(e) {
            if (this.value) {
                // Round to nearest 1000
                let value = Math.round(parseFloat(this.value) / 1000) * 1000;
                this.value = value;
            }
        });
    </script>
}
